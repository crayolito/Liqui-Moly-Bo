{% comment %}
  =====================================================
  SECTION: Dual Images (Dos Imágenes Responsivas)
  PROPÓSITO: Mostrar 2 imágenes con enlaces opcionales
  LAYOUT: Row en desktop, Column en mobile
  AUTOR: Shopify Developer
  ÚLTIMA ACTUALIZACIÓN: 2024-10-15
  =====================================================
{% endcomment %}

{%- liquid
    # Configuración de la section
    assign section_id = 'dual-images-' | append: section.id
    assign container_class = 'dual-images-container'
    
    # Clases CSS para responsive
    assign desktop_class = 'dual-images-row'
    assign mobile_class = 'dual-images-column'
  -%}
  
  <section 
    id="{{ section_id }}" 
    class="dual-images-section"
    data-section-id="{{ section.id }}"
  >
    <div class="{{ container_class }} {{ desktop_class }} {{ mobile_class }}">
      
      {% comment %} IMAGEN 1 {% endcomment %}
      <div class="dual-image-item dual-image-item--1">
        {%- liquid
          # Imagen para desktop/tablet
          assign desktop_image = section.settings.image_1_desktop
          # Imagen para mobile
          assign mobile_image = section.settings.image_1_mobile
          # Fallback: si no hay mobile, usa desktop
          unless mobile_image
            assign mobile_image = desktop_image
          endunless
          
          # Link opcional
          assign link_1 = section.settings.link_1
          assign link_text_1 = section.settings.link_text_1 | default: 'Ver más'
        -%}
        
        {% if link_1 != blank %}
          <a 
            href="{{ link_1 }}" 
            class="dual-image-link"
            aria-label="{{ link_text_1 | escape }}"
          >
        {% endif %}
        
        <div class="dual-image-wrapper">
          {% comment %} Imagen para Desktop/Tablet {% endcomment %}
          {% if desktop_image %}
            <img 
              src="{{ desktop_image | image_url: width: 800 }}"
              srcset="
                {{ desktop_image | image_url: width: 400 }} 400w,
                {{ desktop_image | image_url: width: 600 }} 600w,
                {{ desktop_image | image_url: width: 800 }} 800w,
                {{ desktop_image | image_url: width: 1200 }} 1200w
              "
              sizes="(max-width: 767px) 100vw, 50vw"
              alt="{{ desktop_image.alt | default: section.settings.image_1_alt | escape }}"
              class="dual-image dual-image--desktop"
              width="{{ desktop_image.width }}"
              height="{{ desktop_image.height }}"
              loading="lazy"
            >
          {% else %}
            {% comment %} Placeholder si no hay imagen {% endcomment %}
            <div class="dual-image-placeholder dual-image--desktop">
              <span>Imagen 1 Desktop</span>
            </div>
          {% endif %}
          
          {% comment %} Imagen para Mobile (solo si es diferente) {% endcomment %}
          {% if mobile_image and mobile_image.id != desktop_image.id %}
            <img 
              src="{{ mobile_image | image_url: width: 600 }}"
              srcset="
                {{ mobile_image | image_url: width: 300 }} 300w,
                {{ mobile_image | image_url: width: 400 }} 400w,
                {{ mobile_image | image_url: width: 600 }} 600w
              "
              sizes="100vw"
              alt="{{ mobile_image.alt | default: section.settings.image_1_alt | escape }}"
              class="dual-image dual-image--mobile"
              width="{{ mobile_image.width }}"
              height="{{ mobile_image.height }}"
              loading="lazy"
            >
          {% endif %}
        </div>
        
        {% if link_1 != blank %}
          </a>
        {% endif %}
      </div>
      
      {% comment %} IMAGEN 2 {% endcomment %}
      <div class="dual-image-item dual-image-item--2">
        {%- liquid
          # Imagen para desktop/tablet
          assign desktop_image_2 = section.settings.image_2_desktop
          # Imagen para mobile
          assign mobile_image_2 = section.settings.image_2_mobile
          # Fallback: si no hay mobile, usa desktop
          unless mobile_image_2
            assign mobile_image_2 = desktop_image_2
          endunless
          
          # Link opcional
          assign link_2 = section.settings.link_2
          assign link_text_2 = section.settings.link_text_2 | default: 'Ver más'
        -%}
        
        {% if link_2 != blank %}
          <a 
            href="{{ link_2 }}" 
            class="dual-image-link"
            aria-label="{{ link_text_2 | escape }}"
          >
        {% endif %}
        
        <div class="dual-image-wrapper">
          {% comment %} Imagen para Desktop/Tablet {% endcomment %}
          {% if desktop_image_2 %}
            <img 
              src="{{ desktop_image_2 | image_url: width: 800 }}"
              srcset="
                {{ desktop_image_2 | image_url: width: 400 }} 400w,
                {{ desktop_image_2 | image_url: width: 600 }} 600w,
                {{ desktop_image_2 | image_url: width: 800 }} 800w,
                {{ desktop_image_2 | image_url: width: 1200 }} 1200w
              "
              sizes="(max-width: 767px) 100vw, 50vw"
              alt="{{ desktop_image_2.alt | default: section.settings.image_2_alt | escape }}"
              class="dual-image dual-image--desktop"
              width="{{ desktop_image_2.width }}"
              height="{{ desktop_image_2.height }}"
              loading="lazy"
            >
          {% else %}
            {% comment %} Placeholder si no hay imagen {% endcomment %}
            <div class="dual-image-placeholder dual-image--desktop">
              <span>Imagen 2 Desktop</span>
            </div>
          {% endif %}
          
          {% comment %} Imagen para Mobile (solo si es diferente) {% endcomment %}
          {% if mobile_image_2 and mobile_image_2.id != desktop_image_2.id %}
            <img 
              src="{{ mobile_image_2 | image_url: width: 600 }}"
              srcset="
                {{ mobile_image_2 | image_url: width: 300 }} 300w,
                {{ mobile_image_2 | image_url: width: 400 }} 400w,
                {{ mobile_image_2 | image_url: width: 600 }} 600w
              "
              sizes="100vw"
              alt="{{ mobile_image_2.alt | default: section.settings.image_2_alt | escape }}"
              class="dual-image dual-image--mobile"
              width="{{ mobile_image_2.width }}"
              height="{{ mobile_image_2.height }}"
              loading="lazy"
            >
          {% endif %}
        </div>
        
        {% if link_2 != blank %}
          </a>
        {% endif %}
      </div>
      
    </div>
  </section>
  
  {% comment %} CSS Embedded - Nivel 2 (Con buenas prácticas) {% endcomment %}
  <style>
    /* ===== VARIABLES CSS ===== */
    .dual-images-section {
      --dual-gap: 0px;
      --dual-height-desktop: 400px;
      --dual-height-mobile: 300px;
      --dual-transition: transform 0.3s ease, box-shadow 0.3s ease;
    }
    
    /* ===== CONTAINER BASE ===== */
    .dual-images-container {
      display: flex;
      gap: var(--dual-gap);
      width: 100%;
      max-width: 100%;
    }
    
    /* ===== LAYOUT RESPONSIVO ===== */
    .dual-images-row {
      flex-direction: row;
    }
    
    .dual-images-column {
      flex-direction: column;
    }
    
    /* ===== ITEMS DE IMAGEN ===== */
    .dual-image-item {
      flex: 1;
      position: relative;
      overflow: hidden;
    }
    
    .dual-image-wrapper {
      width: 100%;
      height: var(--dual-height-desktop);
      position: relative;
      overflow: hidden;
    }
    
    /* ===== ESTILOS DE IMAGEN ===== */
    .dual-image {
      width: 100%;
      height: 100%;
      object-fit: cover;
      object-position: center;
      display: block;
      transition: var(--dual-transition);
    }
    
    /* ===== MOSTRAR/OCULTAR POR DISPOSITIVO ===== */
    .dual-image--mobile {
      display: none;
    }
    
    .dual-image--desktop {
      display: block;
    }
    
    /* ===== PLACEHOLDERS ===== */
    .dual-image-placeholder {
      width: 100%;
      height: 100%;
      background: #f5f5f5;
      display: flex;
      align-items: center;
      justify-content: center;
      color: #666;
      font-size: 14px;
      border: 2px dashed #ddd;
    }
    
    /* ===== LINKS INTERACTIVOS ===== */
    .dual-image-link {
      display: block;
      width: 100%;
      height: 100%;
      text-decoration: none;
      position: relative;
    }
    
    .dual-image-link:hover .dual-image {
      transform: scale(1.05);
    }
    
    .dual-image-link:focus {
      outline: 2px solid #005fcc;
      outline-offset: 2px;
    }
    
    /* ===== RESPONSIVE BREAKPOINTS ===== */
    
    /* Tablet */
    @media screen and (max-width: 1024px) {
      .dual-image-wrapper {
        height: calc(var(--dual-height-desktop) * 0.8);
      }
    }
    
    /* Mobile */
    @media screen and (max-width: 767px) {
      .dual-images-row {
        flex-direction: column;
      }
      
      .dual-image-wrapper {
        height: var(--dual-height-mobile);
      }
      
      .dual-image--desktop {
        display: none;
      }
      
      .dual-image--mobile {
        display: block;
      }
      
      /* Si no hay imagen mobile, muestra la desktop */
      .dual-image-item:not(:has(.dual-image--mobile)) .dual-image--desktop {
        display: block;
      }
    }
    
    /* ===== ACCESIBILIDAD ===== */
    @media (prefers-reduced-motion: reduce) {
      .dual-image {
        transition: none;
      }
      
      .dual-image-link:hover .dual-image {
        transform: none;
      }
    }
  </style>
  
  {% schema %}
  {
    "name": "Dual Images",
    "tag": "section",
    "class": "section-dual-images",
    "settings": [
      {
        "type": "header",
        "content": "Imagen 1"
      },
      {
        "type": "image_picker",
        "id": "image_1_desktop",
        "label": "Imagen 1 - Desktop/Tablet",
        "info": "Recomendado: 800x400px o superior"
      },
      {
        "type": "image_picker", 
        "id": "image_1_mobile",
        "label": "Imagen 1 - Mobile (opcional)",
        "info": "Si no seleccionas, se usará la imagen de desktop"
      },
      {
        "type": "text",
        "id": "image_1_alt",
        "label": "Texto alternativo imagen 1",
        "info": "Importante para SEO y accesibilidad"
      },
      {
        "type": "url",
        "id": "link_1",
        "label": "Enlace imagen 1 (opcional)"
      },
      {
        "type": "text",
        "id": "link_text_1",
        "label": "Texto del enlace 1",
        "default": "Ver más",
        "info": "Para lectores de pantalla"
      },
      {
        "type": "header",
        "content": "Imagen 2"
      },
      {
        "type": "image_picker",
        "id": "image_2_desktop", 
        "label": "Imagen 2 - Desktop/Tablet",
        "info": "Recomendado: 800x400px o superior"
      },
      {
        "type": "image_picker",
        "id": "image_2_mobile",
        "label": "Imagen 2 - Mobile (opcional)", 
        "info": "Si no seleccionas, se usará la imagen de desktop"
      },
      {
        "type": "text",
        "id": "image_2_alt",
        "label": "Texto alternativo imagen 2",
        "info": "Importante para SEO y accesibilidad"
      },
      {
        "type": "url",
        "id": "link_2", 
        "label": "Enlace imagen 2 (opcional)"
      },
      {
        "type": "text",
        "id": "link_text_2",
        "label": "Texto del enlace 2",
        "default": "Ver más",
        "info": "Para lectores de pantalla"
      }
    ],
    "presets": [
      {
        "name": "Dual Images"
      }
    ]
  }
  {% endschema %}